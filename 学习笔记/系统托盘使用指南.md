# 🎯 系统托盘功能 - 快速使用指南

## 📖 什么是系统托盘？

系统托盘是操作系统任务栏的一部分，允许应用在后台运行并通过小图标提供快速访问。

**位置**：
- Windows: 任务栏右下角（时钟旁边）
- macOS: 菜单栏右上角
- Linux: 根据桌面环境不同

---

## 🚀 开始使用

### 1. 启动应用

```bash
npm start
```

### 2. 最小化到托盘

有两种方式将应用最小化到系统托盘：

#### 方式 1：点击最小化按钮
点击窗口右上角的最小化按钮 `—`，窗口会隐藏到系统托盘。

#### 方式 2：点击关闭按钮
点击窗口右上角的关闭按钮 `×`，窗口会隐藏而不是退出应用。

**💡 提示**：关闭窗口后，应用仍在后台运行，可以通过托盘图标恢复。

---

## 🖱️ 托盘操作

### 单击托盘图标
- 如果窗口隐藏 → 显示窗口
- 如果窗口可见 → 隐藏窗口

### 双击托盘图标
- 直接显示窗口

### 右键托盘图标
- 显示完整的托盘菜单

---

## 📋 托盘菜单功能

右键点击托盘图标，会看到以下菜单：

```
📋 显示窗口        - 显示主窗口
🔒 隐藏窗口        - 隐藏主窗口
─────────────────
📊 任务统计        - 显示任务完成情况
💾 保存任务        - 快速保存任务到文件
─────────────────
⚙️ 设置
  ├─ 开机自启动    - 开机时自动启动应用
  └─ 关闭时最小化  - 关闭窗口时隐藏到托盘
─────────────────
ℹ️ 关于            - 显示应用信息
─────────────────
🚪 退出 (Ctrl+Q)   - 真正退出应用
```

---

## ⚙️ 常用功能

### 快速查看任务统计

1. 右键托盘图标
2. 选择"📊 任务统计"
3. 查看弹出的统计信息

### 快速保存任务

1. 右键托盘图标
2. 选择"💾 保存任务"
3. 选择保存位置

### 设置开机自启动

1. 右键托盘图标
2. 选择"⚙️ 设置" → "开机自启动"
3. 勾选即可

**注意**：Windows 可能需要管理员权限

### 真正退出应用

要完全退出应用，必须：

1. 右键托盘图标
2. 选择"🚪 退出"
3. 或使用快捷键 `Ctrl+Q` (Windows/Linux) 或 `Cmd+Q` (macOS)

**⚠️ 注意**：直接点击窗口关闭按钮不会退出应用，只会隐藏到托盘！

---

## 🎨 托盘图标说明

### 默认图标
应用使用蓝紫色圆形图标，带有白色勾选标记。

### 自定义图标
如果你想使用自己的图标：

1. 准备图标文件：
   - Windows/Linux: `assets/icon.png` (16x16 或 32x32 像素)
   - macOS: `assets/iconTemplate.png` (16x16 像素，使用黑色和透明度)

2. 重启应用即可使用新图标

---

## 💡 使用技巧

### 技巧 1：快速切换
单击托盘图标可以快速切换窗口的显示/隐藏状态，非常适合需要频繁查看任务的场景。

### 技巧 2：后台运行
关闭窗口后，应用在后台继续运行，不占用任务栏空间。

### 技巧 3：快捷键操作
托盘菜单中的某些功能支持快捷键，如：
- `Ctrl+S`: 保存任务
- `Ctrl+Q`: 退出应用

### 技巧 4：开机自启
启用开机自启动后，应用会在系统启动时自动运行并最小化到托盘。

---

## 🔧 故障排除

### Q: 托盘图标不显示？

**可能原因**：
1. 系统托盘隐藏了图标
2. 应用未正确创建托盘

**解决方法**：
1. **Windows**: 检查"隐藏的图标"（点击任务栏的 `^` 箭头）
2. **macOS**: 检查右上角菜单栏
3. **Linux**: 确保桌面环境支持系统托盘

### Q: 点击关闭按钮后找不到应用？

**解决方法**：
1. 查看系统托盘区域
2. 找到应用图标（蓝紫色圆形）
3. 单击或右键选择"显示窗口"

### Q: 如何完全退出应用？

**正确方法**：
- 右键托盘图标 → 选择"退出"
- 或使用快捷键 `Ctrl+Q`

**错误方法**：
- ❌ 点击窗口关闭按钮（只会隐藏）

### Q: 开机自启动不生效？

**检查项**：
1. 是否勾选了"开机自启动"选项
2. Windows 用户：检查任务管理器的"启动"选项卡
3. macOS 用户：检查"系统偏好设置" → "用户与群组" → "登录项"
4. Linux 用户：检查桌面环境的自启动设置

---

## 📊 托盘功能对比

| 操作 | Windows | macOS | Linux |
|-----|---------|-------|-------|
| 单击图标 | ✅ 切换窗口 | ✅ 切换窗口 | ✅ 切换窗口 |
| 双击图标 | ✅ 显示窗口 | ✅ 显示窗口 | ✅ 显示窗口 |
| 右键图标 | ✅ 显示菜单 | ✅ 显示菜单 | ✅ 显示菜单 |
| 气泡提示 | ✅ 支持 | ❌ 不支持 | ⚠️ 取决于环境 |
| 图标闪烁 | ✅ 支持 | ❌ 不支持 | ⚠️ 取决于环境 |

---

## 🎓 学习要点

通过托盘功能，你应该了解：

1. **Tray 模块的使用**
   - 创建托盘实例
   - 设置图标和提示文本
   - 监听点击事件

2. **托盘菜单**
   - 使用 Menu.buildFromTemplate 创建菜单
   - 添加菜单项、分隔线、子菜单
   - 设置快捷键和复选框

3. **窗口管理**
   - 隐藏和显示窗口
   - 阻止默认关闭行为
   - 管理应用退出逻辑

4. **开机自启动**
   - 使用 app.setLoginItemSettings 设置
   - 不同平台的差异

---

## 📚 相关学习资源

- [03-系统托盘Tray.md](./03-系统托盘Tray.md) - 完整的学习笔记
- [Electron Tray 官方文档](https://www.electronjs.org/docs/api/tray)
- [Electron Menu 官方文档](https://www.electronjs.org/docs/api/menu)

---

## 🎯 实践练习

1. **基础练习**
   - 修改托盘图标
   - 添加新的菜单项
   - 修改提示文本

2. **进阶练习**
   - 实现图标闪烁（收到新任务时）
   - 在托盘提示中显示任务数量
   - 添加更多快捷操作

3. **高级练习**
   - 创建动态更新的托盘菜单（显示最近3个任务）
   - 实现托盘图标的状态切换（空闲/忙碌）
   - 添加托盘通知功能

---

**祝你学习愉快！** 🎉

如有问题，请查看 [03-系统托盘Tray.md](./03-系统托盘Tray.md) 或官方文档。

